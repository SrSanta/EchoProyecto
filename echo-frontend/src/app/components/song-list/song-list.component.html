@if (loading) {
  <div>Cargando canciones...</div>
} @else {
  @if (error) {
    <div>{{ error }}</div>
  } @else {
    @if (songs.length > 0) {
      <h2>Lista de canciones</h2>
      <ul>
        @for (song of songs; track song.id) {
          <li class="song-item">
            <span (click)="playSong(song)" style="cursor:pointer;">
              @if (song.thumbnailFilename) {
                <img [src]="environment.apiUrl + '/audio/' + song.thumbnailFilename" alt="Portada de {{song.title}}" class="song-thumbnail-small">
              } @else {
                <img src="assets/images/placeholder-thumbnail.png" alt="Sin portada" class="song-thumbnail-small">
              }
              <strong>{{ song.title }}</strong> - {{ song.user.username }} ({{ song.genre.name }})
            </span>
            <ng-container *ngIf="song.id as songId">
              <button (click)="addToQueue(song); $event.stopPropagation();"
                      [disabled]="isAddingToQueue[songId]"
                      class="add-queue-btn">
                Añadir a cola
              </button>
              <span *ngIf="addToQueueSuccess[songId] === true" class="success-feedback">✔️ Añadido</span>
              <span *ngIf="addToQueueSuccess[songId] === false" class="error-feedback">❌ Error</span>
            </ng-container>
          </li>
        }
      </ul>
    } @else {
      <div>No hay canciones disponibles.</div>
    }
  }
}
